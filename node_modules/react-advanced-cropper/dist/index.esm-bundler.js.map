{"version":3,"file":"index.esm-bundler.js","sources":["../src/deprecated/hybridAutoZoom.ts","../src/service/utils.ts","../src/hooks/useDeprecationWarning.ts","../src/service/cropper.ts","../src/hooks/useFirstMountState.ts","../src/hooks/useUpdateEffect.ts","../src/hooks/useStateWithCallback.ts","../src/instance/CropperInstance.ts","../src/hooks/useForceRerender.ts","../src/hooks/usePersistentFunction.ts","../src/hooks/useCropperInstance.ts","../src/hooks/useCropperImage.ts","../src/hooks/useWindowResize.ts","../src/hooks/useCropperAutoReconcile.ts","../src/hooks/useAbstractCropper.ts","../src/components/service/StretchableBoundary.tsx","../src/components/service/CropperFade.tsx","../src/components/service/CropperWrapper.tsx","../src/service/events.ts","../src/components/service/CropperBackgroundImage.tsx","../src/components/service/CropperCanvas.tsx","../src/components/service/DraggableElement.tsx","../src/components/service/LineWrapper.tsx","../src/components/lines/SimpleLine.tsx","../src/components/service/HandlerWrapper.tsx","../src/components/handlers/SimpleHandler.tsx","../src/components/service/BoundingBox.tsx","../src/components/service/StencilOverlay.tsx","../src/hooks/useTransition.ts","../src/components/service/ArtificialTransition.tsx","../src/components/service/StencilWrapper.tsx","../src/components/service/StencilGrid.tsx","../src/components/stencils/RectangleStencil.tsx","../src/hooks/useRotateImageOptions.ts","../src/hooks/useScaleImageOptions.ts","../src/hooks/useMoveImageOptions.ts","../src/components/service/TransformableImage.tsx","../src/components/service/CropperBackgroundWrapper.tsx","../src/components/AbstractCropper.tsx","../src/service/constants.ts","../src/hooks/useAbstractCropperProps.ts","../src/components/croppers/FixedCropper.tsx","../src/components/croppers/Cropper.tsx","../src/components/stencils/CircleStencil.tsx","../src/components/service/CropperSource.tsx","../src/components/helpers/CropperPreviewWrapper.tsx","../src/components/helpers/CropperPreviewBackground.tsx","../src/components/helpers/CropperPreview.tsx","../src/service/react.ts"],"sourcesContent":["import {\n\tapplyMove,\n\tapplyScale,\n\tdiff,\n\tfitToSizeRestrictions,\n\tgetAreaPositionRestrictions,\n\tgetAreaSizeRestrictions,\n\tgetCenter,\n\tgetPositionRestrictions,\n\tisInitializedState,\n\tmergePositionRestrictions,\n\tmoveToPositionRestrictions,\n\tratio,\n\tcoordinatesToPositionRestrictions,\n} from 'advanced-cropper/service';\nimport { CoreSettings, CropperState, PostprocessAction, Size } from 'advanced-cropper';\nimport { copyState } from 'advanced-cropper/state';\n\nexport function hybridStencilAutoZoomAlgorithm(state: CropperState, settings: CoreSettings): CropperState {\n\tif (isInitializedState(state)) {\n\t\tconst result = copyState(state);\n\n\t\t// Checks that coordinates has the same ratio that coordinates:\n\t\tconst stencil: Size = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t};\n\n\t\tif (ratio(result.boundary) > ratio(result.coordinates)) {\n\t\t\tstencil.height = result.boundary.height * 0.8;\n\t\t\tstencil.width = stencil.height * ratio(result.coordinates);\n\t\t} else {\n\t\t\tstencil.width = result.boundary.width * 0.8;\n\t\t\tstencil.height = stencil.width * ratio(result.coordinates);\n\t\t}\n\n\t\t// First of all try to resize visible area as much as possible:\n\t\tresult.visibleArea = applyScale(\n\t\t\tresult.visibleArea,\n\t\t\t(result.coordinates.width * result.boundary.width) / (result.visibleArea.width * stencil.width),\n\t\t);\n\n\t\t// Check that visible area doesn't break the area restrictions:\n\t\tconst scale = fitToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n\n\t\tresult.visibleArea = applyScale(result.visibleArea, scale);\n\n\t\tif (scale !== 1) {\n\t\t\tstencil.height /= scale;\n\t\t\tstencil.width /= scale;\n\t\t}\n\n\t\tresult.visibleArea = applyMove(\n\t\t\tresult.visibleArea,\n\t\t\tdiff(getCenter(result.coordinates), getCenter(result.visibleArea)),\n\t\t);\n\n\t\t// Center stencil in visible area:\n\t\tresult.visibleArea = moveToPositionRestrictions(\n\t\t\tresult.visibleArea,\n\t\t\tgetAreaPositionRestrictions(result, settings),\n\t\t);\n\n\t\tresult.coordinates = moveToPositionRestrictions(\n\t\t\tresult.coordinates,\n\t\t\tmergePositionRestrictions(\n\t\t\t\tcoordinatesToPositionRestrictions(result.visibleArea),\n\t\t\t\tgetPositionRestrictions(result, settings),\n\t\t\t),\n\t\t);\n\n\t\treturn result;\n\t}\n\treturn state;\n}\n\nexport function hybridStencilAutoZoom(\n\tstate: CropperState,\n\tsettings: CoreSettings,\n\taction: PostprocessAction,\n): CropperState {\n\tif (action.immediately) {\n\t\treturn hybridStencilAutoZoomAlgorithm(state, settings);\n\t}\n\treturn state;\n}\n","export function deprecationWarning(text: string) {\n\tif (process.env.NODE_ENV === 'development') {\n\t\tconsole.warn(`Deprecation warning: ${text}`);\n\t}\n}\n","import { useRef } from 'react';\nimport { deprecationWarning } from '../service/utils';\n\nexport function useDeprecationWarning() {\n\tconst fired = useRef<string[]>([]);\n\n\treturn (message: string) => {\n\t\tif (fired.current.indexOf(message) === -1) {\n\t\t\tdeprecationWarning(message);\n\t\t\tfired.current.push(message);\n\t\t}\n\t};\n}\n","import React, { forwardRef, PropsWithoutRef } from 'react';\n\nexport function createCropper<T, P = {}>(\n\trender: (props: P, ref: React.Ref<T>) => React.ReactElement | null,\n): (props: PropsWithoutRef<P> & React.RefAttributes<T>) => React.ReactElement | null {\n\treturn forwardRef<T, P>(render);\n}\n","import { useRef } from 'react';\n\nexport function useFirstMountState(): boolean {\n\tconst isFirst = useRef(true);\n\n\tif (isFirst.current) {\n\t\tisFirst.current = false;\n\n\t\treturn true;\n\t}\n\n\treturn isFirst.current;\n}\n","import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\n\nexport const useUpdateEffect: typeof useEffect = (effect, deps) => {\n\tconst isFirstMount = useFirstMountState();\n\n\tuseEffect(() => {\n\t\tif (!isFirstMount) {\n\t\t\treturn effect();\n\t\t}\n\t}, deps);\n};\n","import { SetStateAction, useRef, useState } from \"react\";\nimport { useUpdateEffect } from \"./useUpdateEffect\";\n\ntype DispatchWithCallback<S> = (value: SetStateAction<S>, callback?: Function) => void;\n\nexport function useStateWithCallback<S>(initialState?: S | (() => S)): [S, DispatchWithCallback<S>];\nexport function useStateWithCallback<S = undefined>(): [S | undefined, DispatchWithCallback<S  | undefined>];\nexport function useStateWithCallback<S = undefined>(initialState?: S | (() => S)): [S | undefined, DispatchWithCallback<S | undefined>]  {\n\tconst [state, setState] = useState(initialState);\n\tconst [callback, setCallback] = useState<Function | null | undefined>(null);\n\tconst previousState = useRef(initialState);\n\n\tuseUpdateEffect(() => {\n\t\tif (callback) {\n\t\t\tcallback(state, previousState.current);\n\t\t}\n\t}, [callback])\n\n\treturn [\n\t\tstate,\n\t\t(value: SetStateAction<S | undefined>, callback?: Function) => {\n\t\t\tpreviousState.current = state;\n\t\t\tsetState(value);\n\t\t\tsetCallback(() => callback);\n\t\t}\n\t]\n}\n","import {\n\tAbstractCropperInstance,\n\tAbstractCropperInstanceData,\n\tAbstractCropperInstanceProps,\n\tAbstractCropperInstanceSettings,\n\tgetEmptyInteractions,\n} from 'advanced-cropper';\n\nexport interface CropperInstanceProps<Settings extends AbstractCropperInstanceSettings, Instance> {\n\tgetProps: () => AbstractCropperInstanceProps<Settings, Instance>;\n\tsetData?: (data: AbstractCropperInstanceData) => void;\n}\n\nexport class CropperInstance<\n\tSettings extends AbstractCropperInstanceSettings,\n\tInstance = unknown,\n> extends AbstractCropperInstance<Settings, Instance> {\n\tdata: AbstractCropperInstanceData;\n\tnotify: () => void;\n\tprops: () => AbstractCropperInstanceProps<Settings, Instance>;\n\n\tconstructor(props: () => AbstractCropperInstanceProps<Settings, Instance>, onChange: () => void) {\n\t\tsuper();\n\t\tthis.props = props;\n\t\tthis.notify = onChange;\n\t\tthis.data = {\n\t\t\tstate: null,\n\t\t\ttransitions: false,\n\t\t\tinteractions: getEmptyInteractions(),\n\t\t};\n\t}\n\n\tprotected getProps() {\n\t\treturn this.props();\n\t}\n\n\tprotected setData(data: AbstractCropperInstanceData) {\n\t\tthis.data = data;\n\t\tthis.notify();\n\t}\n\n\tprotected getData(): AbstractCropperInstanceData {\n\t\treturn this.data;\n\t}\n}\n","import { useState } from 'react';\n\nexport function useForceRerender() {\n\tconst [tick, setTick] = useState({});\n\n\treturn () => {\n\t\tsetTick({});\n\t};\n}\n","import { useRef } from 'react';\n\nexport function usePersistentFunction<Props, Arguments extends any[]>(props: (...args: Arguments) => Props) {\n\tconst propsRef = useRef(props);\n\n\tpropsRef.current = props;\n\n\treturn (...args: Arguments) => propsRef.current(...args);\n}\n","import { useRef } from 'react';\nimport {\n\tImageRestriction,\n\tcreateDefaultSettings,\n\tAbstractCropperInstanceParameters,\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceSettings,\n\tDefaultSettings,\n} from 'advanced-cropper';\nimport { CropperInstance } from '../instance/CropperInstance';\nimport { useForceRerender } from './useForceRerender';\nimport { usePersistentFunction } from './usePersistentFunction';\n\nexport type CropperInstanceSettings = DefaultSettings & AbstractCropperInstanceSettings;\n\nexport type CropperInstanceSettingsProp<Settings extends CropperInstanceSettings> = Partial<\n\tPick<Settings, keyof CropperInstanceSettings>\n> &\n\tOmit<Settings, keyof CropperInstanceSettings>;\n\nexport function useCropperInstance<Settings extends CropperInstanceSettings, Instance = unknown>(\n\tprops: () => AbstractCropperInstanceParameters<Settings> &\n\t\tAbstractCropperInstanceCallbacks<Instance> & {\n\t\t\tsettings?: CropperInstanceSettingsProp<Settings>;\n\t\t},\n) {\n\tconst rerender = useForceRerender();\n\n\tconst getProps = usePersistentFunction(() => {\n\t\tconst { settings, ...parameters } = props();\n\n\t\tconst extendedSettings = {\n\t\t\timageRestriction: ImageRestriction.fitArea,\n\t\t\ttransformImage: {\n\t\t\t\tadjustStencil: true,\n\t\t\t},\n\t\t\t...settings,\n\t\t};\n\n\t\tconst extendedParameters = {\n\t\t\ttransitions: true,\n\t\t\t...parameters,\n\t\t};\n\n\t\treturn {\n\t\t\tsettings: {\n\t\t\t\t...extendedSettings,\n\t\t\t\t...createDefaultSettings<Settings>(extendedSettings),\n\t\t\t\t// It's needed because of the nature of the settings field\n\t\t\t} as Settings,\n\t\t\t...extendedParameters,\n\t\t};\n\t});\n\n\tconst cropper = useRef(new CropperInstance<Settings, Instance>(getProps, rerender));\n\n\treturn cropper.current;\n}\nexport type CropperStateHook = ReturnType<typeof useCropperInstance>;\n","import { useEffect, useRef, useState } from 'react';\nimport { CropperImage, isUndefined, promiseTimeout, loadImage } from 'advanced-cropper';\n\nexport interface CropperImageHookSettings {\n\tsrc?: string | null;\n\tonLoadingStart?: () => void;\n\tonLoadingEnd?: () => void;\n\tonError?: () => void;\n\tonLoad?: (image?: CropperImage) => void;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tcheckOrientation?: boolean;\n\tcanvas?: string | boolean;\n\tunloadTime?: number;\n}\n\nexport function useCropperImage(options: CropperImageHookSettings) {\n\tconst { src, onLoadingStart, onLoadingEnd, onError, onLoad, crossOrigin, checkOrientation, canvas, unloadTime } = options;\n\tconst [loading, setLoading] = useState(false);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [image, setImage] = useState<CropperImage | null>(null);\n\n\tconst currentSrc = useRef<string | null>(null);\n\n\tuseEffect(() => {\n\t\tif (currentSrc.current !== src) {\n\t\t\tcurrentSrc.current = src || null;\n\t\t\tsetLoaded(false);\n\t\t\tif (src) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tonLoadingStart?.();\n\t\t\t\tconst promises: Promise<unknown>[] = [\n\t\t\t\t\tloadImage(src, {\n\t\t\t\t\t\tcrossOrigin: isUndefined(crossOrigin) ? canvas : crossOrigin,\n\t\t\t\t\t\tcheckOrientation,\n\t\t\t\t\t}),\n\t\t\t\t];\n\n\t\t\t\tif (loaded && unloadTime) {\n\t\t\t\t\tpromises.push(promiseTimeout(unloadTime));\n\t\t\t\t}\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then((responses) => {\n\t\t\t\t\t\tconst [image] = responses as [CropperImage];\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tsetImage(image);\n\t\t\t\t\t\t\tonLoad?.(image);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonError?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonLoadingEnd?.();\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (unloadTime) {\n\t\t\t\t\tpromiseTimeout(unloadTime).then(() => {\n\t\t\t\t\t\tsetImage(null)\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tsetImage(null)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [src]);\n\n\tuseEffect(() => {\n\t\tif (image) {\n\t\t\tsetLoaded(true)\n\t\t}\n\t}, [image])\n\n\treturn {\n\t\tisLoading() {\n\t\t\treturn loading;\n\t\t},\n\t\tisLoaded() {\n\t\t\treturn loaded\n\t\t},\n\t\tgetImage() {\n\t\t\treturn image;\n\t\t},\n\t\tsetImage,\n\t};\n}\n","import { useEffect, useRef } from 'react';\n\nexport const useWindowResize = (callback: (...args: unknown[]) => void) => {\n\tconst callbackRef = useRef<Function>(callback);\n\n\tconst internalCallback = () => {\n\t\tif (callbackRef.current) {\n\t\t\tcallbackRef.current();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tcallbackRef.current = callback;\n\t}, [callback]);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', internalCallback);\n\t\twindow.addEventListener('orientationchange', internalCallback);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', internalCallback);\n\t\t\twindow.removeEventListener('orientationchange', internalCallback);\n\t\t};\n\t}, []);\n};\n","import { useLayoutEffect, useState } from 'react';\n\ninterface CropperInstance {\n\thasInteractions: () => boolean;\n\treconcileState: () => void;\n}\n\nexport function useCropperAutoReconcile(cropper: CropperInstance, enabled = true) {\n\tconst [active, setActive] = useState(enabled);\n\n\tuseLayoutEffect(() => {\n\t\tif (active && !cropper.hasInteractions()) {\n\t\t\tcropper.reconcileState();\n\t\t}\n\t});\n\n\treturn {\n\t\tpause() {\n\t\t\tsetActive(false);\n\t\t},\n\t\tresume() {\n\t\t\tsetActive(true);\n\t\t},\n\t};\n}\n","import { useImperativeHandle, useRef } from 'react';\nimport {\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceParameters,\n\tCropperImage,\n\tDrawOptions,\n} from 'advanced-cropper';\nimport { StretchableBoundaryMethods } from '../components/service/StretchableBoundary';\nimport { CropperCanvasMethods } from '../components/service/CropperCanvas';\nimport { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperRef, AbstractCropperSettings } from '../components/AbstractCropper';\nimport { useStateWithCallback } from './useStateWithCallback';\nimport { CropperInstanceSettingsProp, useCropperInstance } from './useCropperInstance';\nimport { useCropperImage } from './useCropperImage';\nimport { useWindowResize } from './useWindowResize';\nimport { useUpdateEffect } from './useUpdateEffect';\nimport { useCropperAutoReconcile } from './useCropperAutoReconcile';\n\nexport interface AbstractCropperHookProps<Settings extends AbstractCropperSettings>\n\textends AbstractCropperInstanceParameters<Settings>,\n\t\tAbstractCropperInstanceCallbacks<AbstractCropperRef<Settings>> {\n\tsrc?: string | null;\n\tcheckOrientation?: boolean;\n\tcanvas?: boolean;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tonReady?: (cropper: AbstractCropperRef<Settings>) => void;\n\tonError?: (cropper: AbstractCropperRef<Settings>) => void;\n\tunloadTime?: number;\n\tautoReconcileState?: boolean;\n\tsettings?: CropperInstanceSettingsProp<Settings>;\n}\n\nexport function useAbstractCropper<Extension extends SettingsExtension = {}>(\n\tprops: () => AbstractCropperHookProps<ExtendedSettings<Extension>>,\n) {\n\tconst {\n\t\tsrc,\n\t\tonReady,\n\t\tonError,\n\t\tonUpdate,\n\t\tcanvas = true,\n\t\tunloadTime = 500,\n\t\tcrossOrigin = true,\n\t\tcheckOrientation = true,\n\t\tautoReconcileState = true,\n\t} = props();\n\n\tconst imageRef = useRef<HTMLElement>(null);\n\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\tconst canvasRef = useRef<CropperCanvasMethods>(null);\n\tconst cropperRef = useRef<AbstractCropperRef<ExtendedSettings<Extension>>>(null);\n\n\tconst [currentImage, setCurrentImage] = useStateWithCallback<CropperImage | null>(null);\n\n\tconst cropper = useCropperInstance(() => ({\n\t\t...props(),\n\t\tgetInstance() {\n\t\t\treturn cropperRef.current;\n\t\t},\n\t}));\n\n\tconst cropperImage = useCropperImage({\n\t\tsrc,\n\t\tcrossOrigin,\n\t\tcheckOrientation,\n\t\tunloadTime,\n\t\tcanvas,\n\t\tonLoad() {\n\t\t\tif (cropperRef.current) {\n\t\t\t\tonReady?.(cropperRef.current);\n\t\t\t}\n\t\t},\n\t\tonError() {\n\t\t\tif (cropperRef.current) {\n\t\t\t\tonError?.(cropperRef.current);\n\t\t\t}\n\t\t},\n\t});\n\n\tconst autoReconcile = useCropperAutoReconcile(cropper, autoReconcileState);\n\n\tconst resetCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tsetCurrentImage(image, () => {\n\t\t\t\tif (boundary && image) {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t} else {\n\t\t\t\t\tcropper.clear();\n\t\t\t\t}\n\t\t\t});\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\n\tconst refreshCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tif (boundary && image) {\n\t\t\t\tconst state = cropper.getState();\n\t\t\t\tif (state) {\n\t\t\t\t\tif (boundary.width !== state.boundary.width || boundary.height !== state.boundary.height) {\n\t\t\t\t\t\tcropper.setBoundary(boundary);\n\t\t\t\t\t\t// It's important because, probably, after the boundary reset\n\t\t\t\t\t\t// the cropper can meet some restrictions that were broken before\n\t\t\t\t\t\tcropper.reconcileState();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcropper.clear();\n\t\t\t}\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\tconst cropperInterface = {\n\t\treset: () => resetCropper(),\n\t\trefresh: () => refreshCropper(),\n\t\tsetImage: (image: CropperImage) => setCurrentImage(image),\n\t\treconcileState: cropper.reconcileState,\n\t\tmoveCoordinates: cropper.moveCoordinates,\n\t\tmoveCoordinatesEnd: cropper.moveCoordinatesEnd,\n\t\tresizeCoordinates: cropper.resizeCoordinates,\n\t\tclear: cropper.clear,\n\t\tresizeCoordinatesEnd: cropper.resizeCoordinatesEnd,\n\t\tmoveImage: cropper.moveImage,\n\t\tflipImage: cropper.flipImage,\n\t\tzoomImage: cropper.zoomImage,\n\t\trotateImage: cropper.rotateImage,\n\t\ttransformImage: cropper.transformImage,\n\t\ttransformImageEnd: cropper.transformImageEnd,\n\t\tsetCoordinates: cropper.setCoordinates,\n\t\tsetVisibleArea: cropper.setVisibleArea,\n\t\tstartTransitions: cropper.startTransitions,\n\t\tsetState: cropper.setState,\n\t\thasInteractions: cropper.hasInteractions,\n\t\tgetStencilCoordinates: cropper.getStencilCoordinates,\n\t\tgetCoordinates: cropper.getCoordinates,\n\t\tgetVisibleArea: cropper.getVisibleArea,\n\t\tgetTransforms: cropper.getTransforms,\n\t\tgetTransitions: cropper.getTransitions,\n\t\tgetInteractions: cropper.getInteractions,\n\t\tgetSettings: cropper.getSettings,\n\t\tgetState: cropper.getState,\n\t\tgetDefaultState() {\n\t\t\tconst state = cropper.getState();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tif (state && image) {\n\t\t\t\treturn cropper.createDefaultState(state.boundary, image);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetCanvas: (options?: DrawOptions) => {\n\t\t\tconst state = cropper.getState();\n\t\t\tif (imageRef.current && canvasRef.current && state) {\n\t\t\t\treturn canvasRef.current.draw(state, imageRef.current, options);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetImage: () => {\n\t\t\treturn currentImage ? { ...currentImage } : null;\n\t\t},\n\t\tisLoading: cropperImage.isLoading,\n\t\tisLoaded: cropperImage.isLoaded,\n\t};\n\n\tuseWindowResize(() => {\n\t\trefreshCropper();\n\t});\n\n\tuseUpdateEffect(() => {\n\t\tresetCropper();\n\t}, [cropperImage.getImage()]);\n\n\tuseUpdateEffect(() => {\n\t\tif (cropperRef.current) {\n\t\t\tonUpdate?.(cropperRef.current);\n\t\t}\n\t}, [cropperImage.isLoaded(), cropperImage.isLoading()]);\n\n\tuseImperativeHandle(cropperRef, () => cropperInterface);\n\n\treturn {\n\t\tcropper: cropperInterface,\n\t\trefs: {\n\t\t\timage: imageRef,\n\t\t\tboundary: boundaryRef,\n\t\t\tcanvas: canvasRef,\n\t\t},\n\t\timage: currentImage,\n\t};\n}\n","import React, { ReactNode, forwardRef, useImperativeHandle, useRef, CSSProperties } from 'react';\nimport cn from 'classnames';\nimport {\n\tBoundarySizeAlgorithm,\n\tSize,\n\tstretchCropperBoundary,\n\tBoundaryStretchAlgorithm,\n\tfillBoundary,\n} from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tstretcherClassName?: string;\n\tcontentClassName?: string;\n\tstretchAlgorithm?: BoundaryStretchAlgorithm;\n\tsizeAlgorithm?: BoundarySizeAlgorithm;\n\tchildren?: ReactNode;\n}\n\nexport interface StretchableBoundaryMethods {\n\tstretchTo: (size: Size | null) => Promise<Size | null>;\n\treset: () => void;\n}\n\nexport const StretchableBoundary = forwardRef(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tstyle,\n\t\t\tstretcherClassName,\n\t\t\tcontentClassName,\n\t\t\tstretchAlgorithm = stretchCropperBoundary,\n\t\t\tsizeAlgorithm = fillBoundary,\n\t\t\tchildren,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst stretcherRef = useRef<HTMLDivElement>(null);\n\t\tconst boundaryRef = useRef<HTMLDivElement>(null);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\treset: () => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tif (stretcher) {\n\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\tstretchTo: (size: Size | null) => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tconst boundary = boundaryRef.current;\n\n\t\t\t\tif (size?.width && size?.height && stretcher && boundary) {\n\t\t\t\t\tstretchAlgorithm(boundary, stretcher, size);\n\t\t\t\t\tconst result = sizeAlgorithm(boundary, size);\n\t\t\t\t\treturn Promise.resolve(result.width && result.height ? result : null);\n\t\t\t\t} else {\n\t\t\t\t\tif (stretcher) {\n\t\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t}\n\t\t\t},\n\t\t}));\n\n\t\treturn (\n\t\t\t<div ref={boundaryRef} style={style} className={cn('advanced-cropper-boundary', className)}>\n\t\t\t\t<div ref={stretcherRef} className={cn(['advanced-cropper-boundary__stretcher', stretcherClassName])} />\n\t\t\t\t<div className={cn(['advanced-cropper-boundary__content', contentClassName])}>{children}</div>\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nStretchableBoundary.displayName = 'StretchableBoundary';\n","import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\n\ninterface Props {\n\tvisible?: unknown;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperFade: FC<Props> = ({ visible, className, style, children }) => {\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={cn(className, 'advanced-cropper-fade', Boolean(visible) && 'advanced-cropper-fade--visible')}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperState } from 'advanced-cropper';\nimport { CropperFade } from './CropperFade';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperWrapper: FC<CropperWrapperProps> = ({ cropper, children, className, style }) => {\n\tconst state = cropper ? cropper.getState() : null;\n\tconst loaded = cropper ? cropper.isLoaded() : false;\n\treturn (\n\t\t<div className={cn(className, 'advanced-cropper-wrapper')} style={style}>\n\t\t\t<CropperFade visible={state && loaded} className={'advanced-cropper-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n","import { MouseEvent } from 'react';\n\nexport function preventDefault(e: MouseEvent) {\n\te.preventDefault();\n}\n","import React, { CSSProperties, forwardRef } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, getBackgroundStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperBackgroundImageProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperBackgroundImage = forwardRef<HTMLImageElement, CropperBackgroundImageProps>(\n\t({ className, style, cropper, crossOrigin = true }: CropperBackgroundImageProps, ref) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst image = cropper.getImage();\n\n\t\tconst transformStyles = image && state ? getBackgroundStyle(image, state, transitions) : {};\n\n\t\tconst src = image ? image.src : undefined;\n\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\t\tsrc={src}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\tstyle={{\n\t\t\t\t\t...transformStyles,\n\t\t\t\t\t...style,\n\t\t\t\t}}\n\t\t\t\tonMouseDown={preventDefault}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperBackgroundImage.displayName = 'CropperBackgroundImage';\n","import React, { forwardRef, useImperativeHandle, useRef } from 'react';\nimport { CropperState, DrawOptions, drawCroppedArea } from 'advanced-cropper';\n\nexport interface CropperCanvasMethods {\n\tdraw: (state: CropperState, image: HTMLElement, options?: DrawOptions) => HTMLCanvasElement | null;\n}\n\nexport const CropperCanvas = forwardRef((_, ref) => {\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\n\tconst spareCanvasRef = useRef<HTMLCanvasElement>(null);\n\n\tuseImperativeHandle(ref, () => ({\n\t\tdraw: (state: CropperState, image: HTMLElement, options: DrawOptions = {}) => {\n\t\t\tif (image && canvasRef.current && spareCanvasRef.current) {\n\t\t\t\treturn drawCroppedArea(\n\t\t\t\t\tstate,\n\t\t\t\t\timage as HTMLImageElement | HTMLCanvasElement,\n\t\t\t\t\tcanvasRef.current,\n\t\t\t\t\tspareCanvasRef.current,\n\t\t\t\t\toptions,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t}));\n\n\treturn (\n\t\t<>\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={canvasRef} />\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={spareCanvasRef} />\n\t\t</>\n\t);\n});\n\nCropperCanvas.displayName = 'CropperCanvas';\n","import React, { ReactNode, Component, RefObject, createRef } from 'react';\nimport cn from 'classnames';\nimport { MoveDirections, Point, SimpleTouch, distance } from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => void;\n\tonMoveEnd?: () => void;\n\tonMoveStart?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tuseAnchor?: boolean;\n\tactivationDistance?: number;\n}\n\nexport class DraggableElement extends Component<Props> {\n\ttouches: SimpleTouch[];\n\tstarted: boolean;\n\thovered: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tactivationDistance: 30,\n\t\tuseAnchor: true,\n\t\trerender: true,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.touches = [];\n\t\tthis.hovered = false;\n\t\tthis.started = false;\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t}\n\n\tprocessMove = (e: MouseEvent | TouchEvent, newTouches: SimpleTouch[]) => {\n\t\tconst container = this.container.current;\n\n\t\tif (container && this.touches.length) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\n\t\t\t\tif (this.props.onMove) {\n\t\t\t\t\tconst movingToAnchor = {\n\t\t\t\t\t\tleft:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientX - this.anchor.left - left) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientX - this.anchor.left - left),\n\t\t\t\t\t\ttop:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientY - this.anchor.top - top) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientY - this.anchor.top - top),\n\t\t\t\t\t};\n\n\t\t\t\t\tconst direction = {\n\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.left) {\n\t\t\t\t\t\tdirection.left = newTouches[0].clientX - this.touches[0].clientX;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.top) {\n\t\t\t\t\t\tdirection.top = newTouches[0].clientY - this.touches[0].clientY;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.props?.onMove(direction, e);\n\n\t\t\t\t\tthis.touches = [...newTouches];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onMoveEnd, onLeave } = this.props;\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tonMoveEnd?.();\n\t\t}\n\t\tif (this.hovered) {\n\t\t\tonLeave?.();\n\t\t\tthis.hovered = false;\n\t\t}\n\t\tthis.touches = [];\n\t};\n\n\tinitAnchor = (touch: SimpleTouch) => {\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tthis.anchor = {\n\t\t\t\tleft: touch.clientX - left,\n\t\t\t\ttop: touch.clientY - top,\n\t\t\t};\n\t\t}\n\t};\n\n\tonMouseOver = () => {\n\t\tconst { onEnter, disabled } = this.props;\n\t\tif (!this.hovered && !disabled) {\n\t\t\tthis.hovered = true;\n\t\t\tonEnter?.();\n\t\t}\n\t};\n\n\tonMouseLeave = () => {\n\t\tconst { onLeave } = this.props;\n\t\tif (this.hovered && !this.touches.length) {\n\t\t\tthis.hovered = false;\n\t\t\tonLeave?.();\n\t\t}\n\t};\n\n\tonTouchStart = (e: TouchEvent) => {\n\t\tconst { onEnter, onMoveStart, disabled } = this.props;\n\t\tif (e.cancelable) {\n\t\t\tthis.touches = Array.from(e.touches);\n\n\t\t\tconst shouldStartMove = !disabled && e.touches.length === 1;\n\t\t\tif (shouldStartMove) {\n\t\t\t\tthis.touches = Array.from(e.touches);\n\t\t\t\tonMoveStart?.();\n\t\t\t}\n\n\t\t\tif (!this.hovered && !disabled) {\n\t\t\t\tthis.hovered = true;\n\t\t\t\tonEnter?.();\n\t\t\t}\n\n\t\t\tif (this.started || shouldStartMove) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}\n\t};\n\n\tonTouchEnd = () => {\n\t\tthis.started = false;\n\t\tthis.processEnd();\n\t};\n\n\tonTouchMove = (e: TouchEvent) => {\n\t\tif (this.touches.length >= 1) {\n\t\t\tif (this.started) {\n\t\t\t\tthis.processMove(e, Array.from(e.touches));\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t} else if (\n\t\t\t\tdistance(\n\t\t\t\t\t{ left: this.touches[0].clientX, top: this.touches[0].clientY },\n\t\t\t\t\t{ left: e.touches[0].clientX, top: e.touches[0].clientY },\n\t\t\t\t) > (this.props.activationDistance || 0)\n\t\t\t) {\n\t\t\t\tthis.initAnchor({\n\t\t\t\t\tclientX: e.touches[0].clientX,\n\t\t\t\t\tclientY: e.touches[0].clientY,\n\t\t\t\t});\n\t\t\t\tthis.started = true;\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (e: MouseEvent) => {\n\t\tconst { onMoveStart, disabled } = this.props;\n\t\tif (!disabled && e.button === 0) {\n\t\t\tconst touch = {\n\t\t\t\tclientX: e.clientX,\n\t\t\t\tclientY: e.clientY,\n\t\t\t};\n\t\t\tthis.touches = [touch];\n\t\t\tthis.initAnchor(touch);\n\t\t\te.stopPropagation();\n\t\t\tonMoveStart?.();\n\t\t}\n\t};\n\n\tonMouseMove = (e: MouseEvent) => {\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tthis.processMove(e, [\n\t\t\t\t{\n\t\t\t\t\tclientX: e.clientX,\n\t\t\t\t\tclientY: e.clientY,\n\t\t\t\t},\n\t\t\t]);\n\t\t\tif (e.preventDefault && e.cancelable) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.processEnd();\n\t};\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: Readonly<Props>) {\n\t\tif (this.props.disabled && !prevProps.disabled) {\n\t\t\tthis.touches = [];\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children, className } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={cn('advanced-cropper-draggable-element', className)}\n\t\t\t\tref={this.container}\n\t\t\t\tonMouseOver={this.onMouseOver}\n\t\t\t\tonMouseLeave={this.onMouseLeave}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { ReactNode } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tonDrag?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\tposition?: HorizontalCardinalDirection | VerticalCardinalDirection;\n}\n\nexport const LineWrapper = ({\n\tposition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n}: Props) => {\n\treturn (\n\t\t<DraggableElement\n\t\t\tclassName={cn([\n\t\t\t\t'advanced-cropper-line-wrapper',\n\t\t\t\tposition && `advanced-cropper-line-wrapper--${position}`,\n\t\t\t\tdisabled && `advanced-cropper-line-wrapper--disabled`,\n\t\t\t\tclassName,\n\t\t\t])}\n\t\t\tdisabled={disabled}\n\t\t\tonMove={onDrag}\n\t\t\tonMoveEnd={onDragEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t\tactivationDistance={0}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn([\n\t\t\t\t\t'advanced-cropper-line-wrapper__content',\n\t\t\t\t\tposition && `advanced-cropper-line-wrapper__content--${position}`,\n\t\t\t\t])}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</DraggableElement>\n\t);\n};\n","import React, { useState } from 'react';\nimport cn from 'classnames';\nimport { CardinalDirection, MoveDirections } from 'advanced-cropper';\nimport { LineWrapper } from '../service/LineWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\tposition?: CardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleLine = ({\n\tposition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<LineWrapper\n\t\t\tclassName={cn('advanced-cropper-simple-line-wrapper', wrapperClassName, {\n\t\t\t\t[`advanced-cropper-simple-line-wrapper--${position}`]: !!position,\n\t\t\t})}\n\t\t\tposition={position}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-line',\n\t\t\t\t\thover && 'advanced-cropper-simple-line--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-line--${position}`]: !!position,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</LineWrapper>\n\t);\n};\n","import React, { CSSProperties, ReactNode } from 'react';\nimport classnames from 'classnames';\nimport {\n\tHorizontalCardinalDirection,\n\tMoveDirections,\n\tVerticalCardinalDirection,\n\tgetDirectionNames,\n} from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n\tonDrag?: (shift: MoveDirections, event: MouseEvent | TouchEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tverticalPosition?: VerticalCardinalDirection;\n}\n\nexport const HandlerWrapper = ({\n\thorizontalPosition,\n\tverticalPosition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n\tstyle,\n}: Props) => {\n\tconst position =\n\t\thorizontalPosition || verticalPosition\n\t\t\t? getDirectionNames(horizontalPosition, verticalPosition).snakeCase\n\t\t\t: null;\n\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={classnames(\n\t\t\t\tclassName,\n\t\t\t\t'advanced-cropper-handler-wrapper',\n\t\t\t\tposition && `advanced-cropper-handler-wrapper--${position}`,\n\t\t\t\tdisabled && 'advanced-cropper-handler-wrapper--disabled',\n\t\t\t)}\n\t\t>\n\t\t\t<DraggableElement\n\t\t\t\tclassName={'advanced-cropper-handler-wrapper__draggable'}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonMove={onDrag}\n\t\t\t\tonMoveEnd={onDragEnd}\n\t\t\t\tonLeave={onLeave}\n\t\t\t\tonEnter={onEnter}\n\t\t\t\tactivationDistance={0}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</DraggableElement>\n\t\t</div>\n\t);\n};\n","import React, { CSSProperties, useState } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { HandlerWrapper } from '../service/HandlerWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\twrapperStyle?: CSSProperties;\n\tverticalPosition?: VerticalCardinalDirection;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (shift: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleHandler = ({\n\tverticalPosition,\n\thorizontalPosition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\twrapperStyle,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<HandlerWrapper\n\t\t\tstyle={wrapperStyle}\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-simple-handler-wrapper',\n\t\t\t\twrapperClassName,\n\t\t\t\tverticalPosition && `advanced-cropper-simple-handler-wrapper--${verticalPosition}`,\n\t\t\t\thorizontalPosition && `advanced-cropper-simple-handler-wrapper--${horizontalPosition}`,\n\t\t\t\thorizontalPosition &&\n\t\t\t\t\tverticalPosition &&\n\t\t\t\t\t`advanced-cropper-simple-handler-wrapper--${horizontalPosition}-${verticalPosition}`,\n\t\t\t\thover && 'advanced-cropper-simple-handler-wrapper--hover',\n\t\t\t)}\n\t\t\tverticalPosition={verticalPosition}\n\t\t\thorizontalPosition={horizontalPosition}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-handler',\n\t\t\t\t\thover && 'advanced-cropper-simple-handler--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${verticalPosition}`]: !!verticalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}`]: !!horizontalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}-${verticalPosition}`]:\n\t\t\t\t\t\t\thorizontalPosition && verticalPosition,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</HandlerWrapper>\n\t);\n};\n","import React, { useMemo, ReactNode, CSSProperties, useState, FC } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tHorizontalCardinalDirection,\n\tVerticalCardinalDirection,\n\tMoveDirections,\n\tResizeOptions,\n\tgetDirectionNames,\n\tisCardinalDirection,\n\tisObject,\n\tCoordinates,\n\tResizeAnchor,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\n\nconst HORIZONTAL_DIRECTIONS = ['east', 'west', null] as const;\nconst VERTICAL_DIRECTIONS = ['south', 'north', null] as const;\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface Props {\n\tstyle?: CSSProperties;\n\tclassName?: string;\n\thandlerComponent?: HandlerComponent;\n\thandlers?: boolean | Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: boolean | Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tdisabled?: boolean;\n\tonResize?: (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => void;\n\tonResizeEnd?: () => void;\n\tchildren?: ReactNode;\n\treference?: Coordinates | null;\n}\n\ninterface HandlerNode {\n\tname: OrdinalDirection;\n\tcomponent: HandlerComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\tcontainerClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface LineNode {\n\tname: CardinalDirection;\n\tcomponent: LineComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface PointNode {\n\tname: OrdinalDirection;\n\tclassName: string;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n}\n\nexport const BoundingBox = ({\n\tstyle,\n\tclassName,\n\tchildren,\n\tonResize,\n\tonResizeEnd,\n\thandlerComponent = SimpleHandler,\n\thandlers = {\n\t\teastNorth: true,\n\t\tnorth: true,\n\t\twestNorth: true,\n\t\twest: true,\n\t\twestSouth: true,\n\t\tsouth: true,\n\t\teastSouth: true,\n\t\teast: true,\n\t},\n\thandlerClassNames = {},\n\thandlerWrapperClassNames = {},\n\tlines = {\n\t\twest: true,\n\t\tnorth: true,\n\t\teast: true,\n\t\tsouth: true,\n\t},\n\tlineComponent = SimpleLine,\n\tlineClassNames = {},\n\tlineWrapperClassNames = {},\n\tdisabled = false,\n\treference = null,\n}: Props) => {\n\tconst [lastReference, setLastReference] = useState<Coordinates | null>(null);\n\n\tconst points = useMemo(() => {\n\t\tconst result: PointNode[] = [];\n\t\tHORIZONTAL_DIRECTIONS.forEach((hDirection) => {\n\t\t\tVERTICAL_DIRECTIONS.forEach((vDirection) => {\n\t\t\t\tif (hDirection !== vDirection) {\n\t\t\t\t\tlet { snakeCase, camelCase } = getDirectionNames(hDirection, vDirection);\n\t\t\t\t\tif (snakeCase && camelCase) {\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\tname: camelCase,\n\t\t\t\t\t\t\tclassName: snakeCase,\n\t\t\t\t\t\t\tverticalPosition: vDirection,\n\t\t\t\t\t\t\thorizontalPosition: hDirection,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn result;\n\t}, []);\n\n\tconst lineNodes = useMemo(() => {\n\t\tconst result: LineNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isCardinalDirection(point.name) && (isObject(lines) ? lines[point.name] : lines)) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: lineComponent,\n\t\t\t\t\tclassName: cn(\n\t\t\t\t\t\tlineClassNames.default,\n\t\t\t\t\t\tlineClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line--${point.name}`,\n\t\t\t\t\t\tlineWrapperClassNames.default,\n\t\t\t\t\t\tlineWrapperClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineWrapperClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: lineClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, lines, lineComponent, lineClassNames, lineWrapperClassNames, disabled]);\n\n\tconst handlerNodes = useMemo(() => {\n\t\tconst result: HandlerNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isObject(handlers) ? handlers[point.name] : handlers) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: handlerComponent,\n\t\t\t\t\tclassName: cn(handlerClassNames.default, handlerClassNames[point.name]),\n\t\t\t\t\tcontainerClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper--${point.className}`,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler--${point.className}`,\n\t\t\t\t\t\thandlerWrapperClassNames.default,\n\t\t\t\t\t\thandlerWrapperClassNames[point.name],\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: handlerClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, handlers, handlerComponent, handlerClassNames, handlerWrapperClassNames, disabled]);\n\n\tconst onHandlerMove =\n\t\t(horizontalPosition: HorizontalCardinalDirection | null, verticalPosition: VerticalCardinalDirection | null) =>\n\t\t({ left, top }: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => {\n\t\t\tconst directions = {\n\t\t\t\tleft,\n\t\t\t\ttop,\n\t\t\t};\n\n\t\t\tlet respectDirection: 'width' | 'height' | undefined;\n\t\t\tif (!verticalPosition && horizontalPosition) {\n\t\t\t\trespectDirection = 'width';\n\t\t\t} else if (verticalPosition && !horizontalPosition) {\n\t\t\t\trespectDirection = 'height';\n\t\t\t}\n\n\t\t\tif (!disabled) {\n\t\t\t\tif (onResize) {\n\t\t\t\t\tconst anchor = getDirectionNames(horizontalPosition, verticalPosition).camelCase;\n\t\t\t\t\tif (anchor) {\n\t\t\t\t\t\tonResize(anchor, directions, {\n\t\t\t\t\t\t\treference: lastReference || reference,\n\t\t\t\t\t\t\tpreserveAspectRatio: nativeEvent && nativeEvent.shiftKey,\n\t\t\t\t\t\t\trespectDirection,\n\t\t\t\t\t\t\tcompensate: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!lastReference) {\n\t\t\t\t\tsetLastReference(reference);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\tconst onHandlerMoveEnd = () => {\n\t\tonResizeEnd?.();\n\t\tsetLastReference(null);\n\t};\n\n\treturn (\n\t\t<div className={cn('advanced-cropper-bounding-box', className)} style={style}>\n\t\t\t{children}\n\t\t\t<div>\n\t\t\t\t{lineNodes.map((line) => (\n\t\t\t\t\t<line.component\n\t\t\t\t\t\tkey={line.name}\n\t\t\t\t\t\tdefaultClassName={line.className}\n\t\t\t\t\t\thoverClassName={line.hoverClassName}\n\t\t\t\t\t\twrapperClassName={line.wrapperClassName}\n\t\t\t\t\t\tposition={line.name}\n\t\t\t\t\t\tdisabled={line.disabled}\n\t\t\t\t\t\tonMove={onHandlerMove(line.horizontalPosition, line.verticalPosition)}\n\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{handlerNodes.map((handler) => {\n\t\t\t\t\tconst handlerElement = (\n\t\t\t\t\t\t<handler.component\n\t\t\t\t\t\t\tdefaultClassName={handler.className}\n\t\t\t\t\t\t\thoverClassName={handler.hoverClassName}\n\t\t\t\t\t\t\twrapperClassName={handler.wrapperClassName}\n\t\t\t\t\t\t\thorizontalPosition={handler.horizontalPosition}\n\t\t\t\t\t\t\tverticalPosition={handler.verticalPosition}\n\t\t\t\t\t\t\tdisabled={handler.disabled}\n\t\t\t\t\t\t\tonMove={onHandlerMove(handler.horizontalPosition, handler.verticalPosition)}\n\t\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={handler.name} className={handler.containerClassName}>\n\t\t\t\t\t\t\t{handlerElement}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React, { FC } from 'react';\nimport classnames from 'classnames';\n\ninterface Props {\n\tclassName?: string;\n}\n\nexport const StencilOverlay: FC<Props> = ({ className, children }) => {\n\treturn <div className={classnames('advanced-cropper-stencil-overlay', className)}>{children}</div>;\n};\n","import { CropperTransitions, Animation } from 'advanced-cropper';\nimport { useRef, useState } from 'react';\n\nexport function useTransition<T>(transitions: CropperTransitions | null = null): [(callback: (progress: number) => void) => void, boolean] {\n\tconst animation = useRef(new Animation());\n\tconst [active, setActive] = useState(false);\n\n\treturn [\n\t\t(callback: (progress: number) => void) => {\n\t\t\tif (transitions && transitions.active) {\n\t\t\t\t\tanimation.current.start({\n\t\t\t\t\t\t...transitions,\n\t\t\t\t\t\tonStart() {\n\t\t\t\t\t\t\tsetActive(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonProgress(progress) {\n\t\t\t\t\t\t\tcallback(progress);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonStop() {\n\t\t\t\t\t\t\tsetActive(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n \t\t\t} else if (!animation.current.active) {\n\t\t\t\tcallback(1);\n\t\t\t}\n\t\t},\n\t\tactive,\n\t];\n}\n","import React, { FC, ReactNode, useLayoutEffect, useRef, useState } from 'react';\nimport { Coordinates, CropperTransitions, deepCompare, isNumber } from 'advanced-cropper';\nimport classnames from 'classnames';\nimport { useTransition } from '../../hooks/useTransition';\n\ninterface Props {\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft?: number;\n\ttop?: number;\n\tchildren?: ReactNode;\n}\n\nexport const ArtificialTransition: FC<Props> = ({ className, transitions, children, ...values }) => {\n\tconst root = useRef<HTMLDivElement>(null);\n\n\tconst transitionValues = useRef<Partial<Coordinates>>(values);\n\n\tconst [rememberedValues, setRememberedValues] = useState(values);\n\n\tconst [runTransitions, transitionsActive] = useTransition(transitions);\n\n\tuseLayoutEffect(() => {\n\t\tif (!deepCompare(rememberedValues, values)) {\n\t\t\tsetRememberedValues(values);\n\n\t\t\tconst startValues = transitionsActive\n\t\t\t\t? {\n\t\t\t\t\t\t...transitionValues.current,\n\t\t\t\t  }\n\t\t\t\t: rememberedValues;\n\n\t\t\trunTransitions((progress) => {\n\t\t\t\tconst properties = ['left', 'top', 'height', 'width'] as const;\n\n\t\t\t\tproperties.forEach((property) => {\n\t\t\t\t\tconst desiredValue = values[property];\n\t\t\t\t\tconst startValue = startValues[property];\n\n\t\t\t\t\ttransitionValues.current[property] =\n\t\t\t\t\t\tisNumber(startValue) && isNumber(desiredValue)\n\t\t\t\t\t\t\t? startValue + (desiredValue - startValue) * progress\n\t\t\t\t\t\t\t: desiredValue;\n\t\t\t\t});\n\n\t\t\t\tif (root.current) {\n\t\t\t\t\troot.current.style.width = `${transitionValues.current.width}px`;\n\t\t\t\t\troot.current.style.height = `${transitionValues.current.height}px`;\n\t\t\t\t\troot.current.style.transform = `translate3d(${transitionValues.current.left}px, ${transitionValues.current.top}px, 0px)`;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [rememberedValues, transitionsActive, values.width, values.height, values.top, values.left]);\n\n\tconst currentValues = transitionsActive ? transitionValues.current : values;\n\n\tconst rootStyle = {\n\t\tleft: 0,\n\t\ttop: 0,\n\t\twidth: `${currentValues.width}px`,\n\t\theight: `${currentValues.height}px`,\n\t\ttransform: `translate3d(${currentValues.left}px, ${currentValues.top}px, 0px)`,\n\t};\n\n\treturn (\n\t\t<div ref={root} className={classnames('advanced-cropper-artificial-transition', className)} style={rootStyle}>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import React, { FC, ReactNode } from 'react';\nimport { CropperTransitions } from 'advanced-cropper';\nimport classnames from 'classnames';\n\nimport { ArtificialTransition } from './ArtificialTransition';\n\ninterface Props {\n\tchildren?: ReactNode;\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft: number;\n\ttop: number;\n}\n\nexport const StencilWrapper: FC<Props> = ({ className, transitions, width, height, left, top, children }) => {\n\treturn (\n\t\t<ArtificialTransition\n\t\t\tclassName={classnames('advanced-cropper-stencil-wrapper', className)}\n\t\t\ttransitions={transitions}\n\t\t\twidth={width}\n\t\t\theight={height}\n\t\t\ttop={top}\n\t\t\tleft={left}\n\t\t>\n\t\t\t{children}\n\t\t</ArtificialTransition>\n\t);\n};\n","import React, { FC, ReactNode, useState } from 'react';\nimport cn from 'classnames';\nimport { useUpdateEffect } from '../../hooks/useUpdateEffect';\n\nexport interface StencilGridProps {\n\tvisible?: boolean;\n\tcolumns?: number;\n\trows?: number;\n\tclassName?: string;\n}\n\nexport const StencilGrid: FC<StencilGridProps> = ({ columns = 3, rows = 3, visible = false, className }) => {\n\tconst nodes: ReactNode[] = [];\n\n\tconst [currentColumns, setCurrentColumns] = useState(columns);\n\tconst [currentRows, setCurrentRows] = useState(rows);\n\n\tuseUpdateEffect(() => {\n\t\tif (visible) {\n\t\t\tsetCurrentRows(rows);\n\t\t\tsetCurrentColumns(columns);\n\t\t}\n\t}, [visible, columns, rows]);\n\n\tfor (let i = 0; i < currentRows; i++) {\n\t\tconst cells: ReactNode[] = [];\n\t\tfor (let j = 0; j < currentColumns; j++) {\n\t\t\tcells.push(\n\t\t\t\t<div\n\t\t\t\t\tkey={j}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-stencil-grid__cell',\n\t\t\t\t\t\ti === 0 && 'advanced-cropper-stencil-grid__cell--top',\n\t\t\t\t\t\ti === currentRows - 1 && 'advanced-cropper-stencil-grid__cell--bottom',\n\t\t\t\t\t\tj === 0 && 'advanced-cropper-stencil-grid__cell--left',\n\t\t\t\t\t\tj === currentColumns - 1 && 'advanced-cropper-stencil-grid__cell--right',\n\t\t\t\t\t)}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\t\tnodes.push(\n\t\t\t<div key={i} className={'advanced-cropper-stencil-grid__row'}>\n\t\t\t\t{cells}\n\t\t\t</div>,\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-stencil-grid',\n\t\t\t\tvisible && 'advanced-cropper-stencil-grid--visible',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{nodes}\n\t\t</div>\n\t);\n};\n","import React, { FC, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n\tcreateAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tminAspectRatio?: number;\n\tmaxAspectRatio?: number;\n\taspectRatio?: RawAspectRatio;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tgrid?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const RectangleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\taspectRatio,\n\t\t\tminAspectRatio,\n\t\t\tmaxAspectRatio,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\tnorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twest: true,\n\t\t\t\twestSouth: true,\n\t\t\t\tsouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t\teast: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: createAspectRatio(\n\t\t\t\taspectRatio || {\n\t\t\t\t\tminimum: minAspectRatio,\n\t\t\t\t\tmaximum: maxAspectRatio,\n\t\t\t\t},\n\t\t\t),\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && movable) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizable) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-rectangle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--movable': movable,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizable': resizable,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-rectangle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizable}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!movable}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-rectangle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nRectangleStencil.displayName = 'RectangleStencil';\n","import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { RotateImageOptions } from '../types';\n\ninterface DefinedRotateImageOptions {\n\ttouch: boolean;\n}\n\nexport function useRotateImageOptions(rotateImage: RotateImageOptions | boolean): DefinedRotateImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\trotateImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[rotateImage],\n\t);\n}\n","import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { ScaleImageOptions } from '../types';\n\ninterface DefinedScaleImageOptions {\n\ttouch: boolean;\n\twheel:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n}\n\nexport function useScaleImageOptions(scaleImage: ScaleImageOptions | boolean): DefinedScaleImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tscaleImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\twheel: {\n\t\t\t\t\t\tratio: 0.1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\twheel: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[scaleImage],\n\t);\n}\n","import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { MoveImageOptions } from '../types';\n\ninterface DefinedMoveImageOptions {\n\ttouch: boolean;\n\tmouse: boolean;\n}\n\nexport function useMoveImageOptions(moveImage: MoveImageOptions | boolean): DefinedMoveImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tmoveImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\tmouse: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\tmouse: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[moveImage],\n\t);\n}\n","import React, { ReactNode, CSSProperties, Component, RefObject, createRef } from 'react';\nimport {\n\tdebounce,\n\tDebouncedFunction,\n\tImageTransform,\n\tPoint,\n\tSimpleTouch,\n\ttouchesToImageTransform,\n\twheelEventToImageTransform,\n} from 'advanced-cropper';\n\ninterface Props {\n\tonTransform?: (transform: ImageTransform) => void;\n\tonTransformEnd?: () => void;\n\tonEvent?: (transformEvent: TransformableImageEvent, nativeEvent: Event) => unknown;\n\tdisabled?: boolean;\n\ttouchMove?: boolean;\n\tmouseMove?: boolean;\n\ttouchScale?: boolean;\n\ttouchRotate?: boolean;\n\twheelScale?:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n\ttimeout?: number;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n}\n\nexport class TransformableImageEvent {\n\tconstructor({ active }: { active: boolean }) {\n\t\tthis.active = active;\n\t\tthis.defaultPrevented = false;\n\t}\n\tpreventDefault() {\n\t\tthis.defaultPrevented = true;\n\t}\n\tdefaultPrevented: boolean;\n\tactive: boolean;\n}\n\nexport class TransformableImage extends Component<Props> {\n\ttouches: (SimpleTouch & { identifier?: number })[];\n\ttransforming: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\tdebouncedProcessEnd: DebouncedFunction<TransformableImage['processEnd']>;\n\n\tstatic defaultProps = {\n\t\ttouchMove: true,\n\t\tmouseMove: true,\n\t\ttouchScale: true,\n\t\ttouchRotate: false,\n\t\twheelScale: true,\n\t\ttimeout: 500,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.transforming = false;\n\t\tthis.touches = [];\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t\tthis.debouncedProcessEnd = debounce(this.processEnd, props.timeout);\n\t}\n\n\tprocessMove = (newTouches: SimpleTouch[]) => {\n\t\tconst { onTransform, touchScale, touchMove, touchRotate } = this.props;\n\t\tconst container = this.container.current;\n\t\tif (container && onTransform) {\n\t\t\tonTransform(\n\t\t\t\ttouchesToImageTransform(newTouches, this.touches, container, {\n\t\t\t\t\tscale: touchScale,\n\t\t\t\t\trotate: touchRotate,\n\t\t\t\t\tmove: touchMove,\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis.touches = newTouches;\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onTransformEnd } = this.props;\n\t\tif (this.transforming) {\n\t\t\tthis.transforming = false;\n\t\t\tif (onTransformEnd) {\n\t\t\t\tonTransformEnd();\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessStart = () => {\n\t\tthis.transforming = true;\n\t\tthis.debouncedProcessEnd.clear();\n\t};\n\n\tprocessEvent = (nativeEvent: Event) => {\n\t\tconst { onEvent, disabled } = this.props;\n\t\tconst transformEvent = new TransformableImageEvent({ active: this.transforming });\n\n\t\tif (onEvent) {\n\t\t\tonEvent(transformEvent, nativeEvent);\n\t\t} else {\n\t\t\tnativeEvent.preventDefault();\n\t\t\tnativeEvent.stopPropagation();\n\t\t}\n\n\t\treturn !disabled && !transformEvent.defaultPrevented;\n\t};\n\n\tonWheel = (event: WheelEvent) => {\n\t\tconst { onTransform, wheelScale } = this.props;\n\t\tconst container = this.container.current;\n\n\t\tif (wheelScale) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processStart();\n\t\t\t\tif (onTransform && container) {\n\t\t\t\t\tonTransform(\n\t\t\t\t\t\twheelEventToImageTransform(event, container, wheelScale === true ? 0.1 : wheelScale.ratio),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (!this.touches.length) {\n\t\t\t\t\tthis.debouncedProcessEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchStart = (event: TouchEvent) => {\n\t\tconst { touchMove, touchScale, touchRotate } = this.props;\n\t\tif (event.cancelable && (touchMove || ((touchScale || touchRotate) && event.touches.length > 1))) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst container = this.container.current;\n\t\t\t\tif (container) {\n\t\t\t\t\tconst { left, top, bottom, right } = container.getBoundingClientRect();\n\t\t\t\t\tthis.touches = Array.from(event.touches).filter(\n\t\t\t\t\t\t(touch) =>\n\t\t\t\t\t\t\ttouch.clientX > left &&\n\t\t\t\t\t\t\ttouch.clientX < right &&\n\t\t\t\t\t\t\ttouch.clientY > top &&\n\t\t\t\t\t\t\ttouch.clientY < bottom,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchEnd = (event: TouchEvent) => {\n\t\tif (event.touches.length === 0) {\n\t\t\tthis.touches = [];\n\t\t\tthis.processEnd();\n\t\t}\n\t};\n\n\tonTouchMove = (event: TouchEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tconst touches = [...event.touches].filter(\n\t\t\t\t(touch) =>\n\t\t\t\t\t!touch.identifier ||\n\t\t\t\t\tthis.touches.find((anotherTouch) => anotherTouch.identifier === touch.identifier),\n\t\t\t);\n\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove(touches);\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (event: MouseEvent) => {\n\t\tconst { mouseMove } = this.props;\n\t\tif (mouseMove && 'buttons' in event && event.buttons === 1) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst touch = {\n\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t};\n\t\t\t\tthis.touches = [touch];\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseMove = (event: MouseEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove([\n\t\t\t\t\t{\n\t\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.touches = [];\n\t\tthis.processEnd();\n\t};\n\n\tshouldComponentUpdate(): boolean {\n\t\treturn true;\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t\tcontainer.removeEventListener('wheel', this.onWheel);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('wheel', this.onWheel, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { className, children, style } = this.props;\n\t\treturn (\n\t\t\t<div className={className} style={style} ref={this.container}>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { CSSProperties, ReactNode } from 'react';\nimport { CropperTransitions, ImageTransform } from 'advanced-cropper';\nimport { useRotateImageOptions } from '../../hooks/useRotateImageOptions';\nimport { useScaleImageOptions } from '../../hooks/useScaleImageOptions';\nimport { useMoveImageOptions } from '../../hooks/useMoveImageOptions';\nimport { MoveImageOptions, RotateImageOptions, ScaleImageOptions } from '../../types';\nimport { TransformableImage } from './TransformableImage';\n\ninterface DesiredCropperRef {\n\ttransformImage: (transform: ImageTransform) => void;\n\ttransformImageEnd: () => void;\n\tgetTransitions: () => CropperTransitions;\n}\n\nexport interface CropperBackgroundWrapperProps {\n\tcropper: DesiredCropperRef;\n\trotateImage?: boolean | RotateImageOptions;\n\tscaleImage?: boolean | ScaleImageOptions;\n\tmoveImage?: boolean | MoveImageOptions;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\ttimeout?: number;\n}\n\nexport const CropperBackgroundWrapper = ({\n\tscaleImage = true,\n\tmoveImage = true,\n\trotateImage = false,\n\tchildren,\n\tclassName,\n\tstyle,\n\tcropper,\n\ttimeout,\n}: CropperBackgroundWrapperProps) => {\n\tconst transitions = cropper.getTransitions();\n\n\tconst rotateImageOptions = useRotateImageOptions(rotateImage);\n\tconst scaleImageOptions = useScaleImageOptions(scaleImage);\n\tconst moveImageOptions = useMoveImageOptions(moveImage);\n\n\treturn (\n\t\t<TransformableImage\n\t\t\tclassName={className}\n\t\t\tstyle={style}\n\t\t\tonTransform={cropper.transformImage}\n\t\t\tonTransformEnd={cropper.transformImageEnd}\n\t\t\ttouchMove={moveImageOptions.touch}\n\t\t\tmouseMove={moveImageOptions.mouse}\n\t\t\ttouchScale={scaleImageOptions.touch}\n\t\t\twheelScale={scaleImageOptions.wheel}\n\t\t\ttouchRotate={rotateImageOptions.touch}\n\t\t\tdisabled={transitions.active}\n\t\t\ttimeout={timeout}\n\t\t>\n\t\t\t{children}\n\t\t</TransformableImage>\n\t);\n};\n","import React, { useImperativeHandle, useRef, CSSProperties, Ref } from 'react';\nimport cn from 'classnames';\nimport {\n\tDrawOptions,\n\tDefaultSettings,\n\tdefaultStencilConstraints,\n\tCoreSettings,\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tModifierSettings,\n\tInitializeSettings,\n} from 'advanced-cropper';\n\nimport {\n\tCropperBackgroundWrapperComponent,\n\tCropperWrapperComponent,\n\tStencilComponent,\n\tCropperBackgroundComponent,\n\tArbitraryProps,\n\tStencilConstraints,\n\tSettingsExtension,\n\tExtendedSettings,\n\tCustomCropperRef,\n\tCropperBoundaryComponent,\n} from '../types';\nimport { CropperStateHook, CropperInstanceSettings, CropperInstanceSettingsProp } from '../hooks/useCropperInstance';\nimport { createCropper } from '../service/cropper';\nimport { AbstractCropperHookProps, useAbstractCropper } from '../hooks/useAbstractCropper';\nimport { StretchableBoundary } from './service/StretchableBoundary';\nimport { CropperWrapper } from './service/CropperWrapper';\nimport { CropperBackgroundImage } from './service/CropperBackgroundImage';\nimport { CropperCanvas } from './service/CropperCanvas';\nimport { RectangleStencil } from './stencils/RectangleStencil';\nimport { CropperBackgroundWrapper } from './service/CropperBackgroundWrapper';\n\nexport type AbstractCropperSettingsProp<Settings extends CropperInstanceSettings> =\n\tCropperInstanceSettingsProp<Settings>;\n\nexport type AbstractCropperSettings = DefaultSettings & CoreSettings & ModifierSettings & InitializeSettings;\n\nexport interface AbstractCropperRef<Settings extends AbstractCropperSettings = AbstractCropperSettings> {\n\treset: () => void;\n\trefresh: () => void;\n\tclear: () => void;\n\tsetCoordinates: CropperStateHook['setCoordinates'];\n\tsetState: CropperStateHook['setState'];\n\tsetImage: (image: CropperImage) => void;\n\tflipImage: CropperStateHook['flipImage'];\n\tzoomImage: CropperStateHook['zoomImage'];\n\trotateImage: CropperStateHook['rotateImage'];\n\treconcileState: CropperStateHook['reconcileState'];\n\tmoveImage: CropperStateHook['moveImage'];\n\tmoveCoordinates: CropperStateHook['moveCoordinates'];\n\tmoveCoordinatesEnd: CropperStateHook['moveCoordinatesEnd'];\n\tresizeCoordinates: CropperStateHook['resizeCoordinates'];\n\tresizeCoordinatesEnd: CropperStateHook['resizeCoordinatesEnd'];\n\ttransformImage: CropperStateHook['transformImage'];\n\ttransformImageEnd: CropperStateHook['transformImageEnd'];\n\tgetCoordinates: CropperStateHook['getCoordinates'];\n\tgetVisibleArea: CropperStateHook['getVisibleArea'];\n\tgetTransforms: CropperStateHook['getTransforms'];\n\tgetStencilCoordinates: CropperStateHook['getStencilCoordinates'];\n\tgetDefaultState: () => CropperState | null;\n\tgetCanvas: (options?: DrawOptions) => HTMLCanvasElement | null;\n\tgetSettings: () => Settings;\n\tgetImage: () => CropperImage | null;\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface AbstractCropperProps<Settings extends AbstractCropperSettings>\n\textends Omit<AbstractCropperHookProps<Settings>, 'settings'> {\n\tbackgroundComponent?: CropperBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tbackgroundClassName?: string;\n\tbackgroundWrapperComponent?: CropperBackgroundWrapperComponent;\n\tbackgroundWrapperProps?: ArbitraryProps;\n\tbackgroundWrapperClassName?: string;\n\twrapperComponent?: CropperWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstencilComponent?: StencilComponent;\n\tstencilProps?: ArbitraryProps;\n\tstencilConstraints?: StencilConstraints<AbstractCropperSettingsProp<Settings>>;\n\tclassName?: string;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\tstyle?: CSSProperties;\n\tsettings: CropperInstanceSettingsProp<Settings>;\n}\n\nexport type AbstractCropperIntrinsicProps<Settings extends AbstractCropperSettings> = Omit<\n\tAbstractCropperProps<Settings>,\n\t'settings'\n>;\n\nconst AbstractCropperComponent = <Extension extends SettingsExtension = {}>(\n\tprops: AbstractCropperProps<ExtendedSettings<Extension>>,\n\tref: Ref<CustomCropperRef<Extension>>,\n) => {\n\tconst {\n\t\tstyle,\n\t\tclassName,\n\t\tstencilComponent = RectangleStencil,\n\t\tstencilConstraints = defaultStencilConstraints,\n\t\tstencilProps = {},\n\t\twrapperComponent = CropperWrapper,\n\t\twrapperProps = {},\n\t\tbackgroundComponent = CropperBackgroundImage,\n\t\tbackgroundProps = {},\n\t\tbackgroundClassName,\n\t\tbackgroundWrapperComponent = CropperBackgroundWrapper,\n\t\tbackgroundWrapperProps = {},\n\t\tboundaryComponent = StretchableBoundary,\n\t\tboundaryProps,\n\t\tboundaryClassName,\n\t\tcanvas = true,\n\t\tcrossOrigin = true,\n\t\tsettings,\n\t\t...parameters\n\t} = props;\n\n\tconst stencilRef = useRef<StencilComponent>(null);\n\n\tconst { cropper, image, refs } = useAbstractCropper(() => ({\n\t\t...parameters,\n\t\tcrossOrigin,\n\t\tstencilProps,\n\t\tcanvas,\n\t\tsettings: {\n\t\t\t...settings,\n\t\t\t...stencilConstraints(settings, {\n\t\t\t\t...stencilProps,\n\t\t\t\t...stencilRef.current,\n\t\t\t}),\n\t\t},\n\t}));\n\n\tconst StencilComponent = stencilComponent;\n\n\tconst WrapperComponent = wrapperComponent;\n\n\tconst BackgroundWrapperComponent = backgroundWrapperComponent;\n\n\tconst BackgroundComponent = backgroundComponent;\n\n\tconst BoundaryComponent = boundaryComponent;\n\n\tuseImperativeHandle(ref, () => cropper);\n\n\tconst deprecatedWrapperProps = {\n\t\tloading: cropper.isLoading(),\n\t\tloaded: cropper.isLoaded(),\n\t};\n\n\treturn (\n\t\t<WrapperComponent\n\t\t\t{...wrapperProps}\n\t\t\tclassName={cn('advanced-cropper', className)}\n\t\t\tcropper={cropper}\n\t\t\tstyle={style}\n\t\t\t{...deprecatedWrapperProps}\n\t\t>\n\t\t\t<BoundaryComponent\n\t\t\t\t{...boundaryProps}\n\t\t\t\tref={refs.boundary}\n\t\t\t\tclassName={cn('advanced-cropper__boundary', boundaryClassName)}\n\t\t\t>\n\t\t\t\t<BackgroundWrapperComponent\n\t\t\t\t\t{...backgroundWrapperProps}\n\t\t\t\t\tcropper={cropper}\n\t\t\t\t\tclassName={'advanced-cropper__background-wrapper'}\n\t\t\t\t>\n\t\t\t\t\t{cropper.getState() && (\n\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\tref={refs.image}\n\t\t\t\t\t\t\tcrossOrigin={crossOrigin}\n\t\t\t\t\t\t\tcropper={cropper}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper__background', backgroundClassName)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<StencilComponent {...stencilProps} ref={stencilRef} cropper={cropper} image={image} />\n\t\t\t\t</BackgroundWrapperComponent>\n\t\t\t\t{canvas && <CropperCanvas ref={refs.canvas} />}\n\t\t\t</BoundaryComponent>\n\t\t</WrapperComponent>\n\t);\n};\n\nexport const AbstractCropper = createCropper(AbstractCropperComponent);\n","export const defaultSettings = [\n\t'transformImage',\n\t'moveCoordinates',\n\t'resizeCoordinates',\n\t'defaultCoordinates',\n\t'defaultVisibleArea',\n\t'areaPositionRestrictions',\n\t'areaSizeRestrictions',\n\t'sizeRestrictions',\n\t'positionRestrictions',\n\t'aspectRatio',\n\t'minWidth',\n\t'minHeight',\n\t'maxWidth',\n\t'maxHeight',\n\t'defaultSize',\n\t'defaultPosition',\n\t'defaultTransforms',\n\t'imageRestriction',\n\t'priority',\n];\n","import { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperIntrinsicProps } from '../components/AbstractCropper';\nimport { defaultSettings } from '../service/constants';\nimport { CoreSettings, DefaultSettings, ModifierSettings } from '../../../../Advanced Cropper/advanced-cropper/dist';\n\ntype Props<Extension extends SettingsExtension> = AbstractCropperIntrinsicProps<ExtendedSettings<Extension>>;\n\nexport function useAbstractCropperProps<Extension extends SettingsExtension>(\n\tprops: Props<Extension>,\n\tsettings: string[] = defaultSettings,\n) {\n\tconst result: any = { settings: {}, props: {} };\n\n\t(Object.keys(props) as (keyof typeof props)[]).forEach((key) => {\n\t\tif (settings.some((setting) => setting === key)) {\n\t\t\tresult.settings[key] = props[key];\n\t\t} else {\n\t\t\tresult.props[key] = props[key];\n\t\t}\n\t});\n\n\treturn result as {\n\t\tsettings: Extension & Partial<DefaultSettings & CoreSettings & ModifierSettings>;\n\t\tprops: Props<Extension>;\n\t};\n}\n","import React, { forwardRef, Ref } from 'react';\nimport {\n\tdefaultSize,\n\tsizeRestrictions,\n\taspectRatio,\n\tfixedStencil,\n\tStencilSize,\n\tfixedStencilConstraints,\n} from 'advanced-cropper/extensions/stencil-size';\nimport { withDefaultSizeRestrictions } from 'advanced-cropper/defaults';\nimport { CustomCropperProps, CustomCropperRef } from '../../types';\nimport { AbstractCropper } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { defaultSettings } from '../../service/constants';\n\ntype UnavailableProps = 'sizeRestrictions' | 'aspectRatio';\n\nexport interface FixedCropperSettings {\n\tstencilSize: StencilSize<this>;\n}\n\nexport type FixedCropperProps = Omit<CustomCropperProps<FixedCropperSettings>, UnavailableProps>;\n\nexport type FixedCropperRef = CustomCropperRef<FixedCropperSettings>;\n\nexport const FixedCropper = forwardRef((props: FixedCropperProps, ref?: Ref<FixedCropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props, [...defaultSettings, 'stencilSize']);\n\treturn (\n\t\t<AbstractCropper<FixedCropperSettings>\n\t\t\tpostProcess={fixedStencil}\n\t\t\tstencilConstraints={fixedStencilConstraints}\n\t\t\t{...cropperProps.props}\n\t\t\tsettings={{\n\t\t\t\tdefaultSize,\n\t\t\t\taspectRatio,\n\t\t\t\tsizeRestrictions: withDefaultSizeRestrictions(sizeRestrictions),\n\t\t\t\t...cropperProps.settings,\n\t\t\t\ttransformImage: {\n\t\t\t\t\t...cropperProps.settings.transformImage,\n\t\t\t\t\tadjustStencil: false,\n\t\t\t\t},\n\t\t\t}}\n\t\t\tref={ref}\n\t\t/>\n\t);\n});\n\nFixedCropper.displayName = 'FixedCropper';\n","import React, { forwardRef, Ref } from 'react';\nimport { isUndefined } from 'advanced-cropper';\nimport { StencilSize } from 'advanced-cropper/extensions/stencil-size';\nimport { CustomCropperProps, CustomCropperRef, ExtendedSettings, SettingsExtension } from '../../types';\nimport { hybridStencilAutoZoom } from '../../deprecated/hybridAutoZoom';\nimport { useDeprecationWarning } from '../../hooks/useDeprecationWarning';\nimport { AbstractCropper, AbstractCropperIntrinsicProps } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { FixedCropper, FixedCropperRef, FixedCropperSettings } from './FixedCropper';\n\ninterface DeprecatedCropperSettings {\n\tstencilSize?: StencilSize;\n\tautoZoom?: boolean;\n}\n\nexport type CropperProps<Extension extends SettingsExtension = {}> = CustomCropperProps<Extension>;\n\nexport type CropperRef<Extension extends SettingsExtension = {}> = CustomCropperRef<Extension>;\n\nexport const Cropper = forwardRef((props: CropperProps, ref?: Ref<CropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props);\n\n\tconst intrinsicProps = cropperProps.props;\n\n\t// Process the deprecated properties\n\tconst { stencilSize, autoZoom, ...actualSettings } = cropperProps.settings as DeprecatedCropperSettings;\n\n\tconst deprecationWarning = useDeprecationWarning();\n\n\tif (!isUndefined(autoZoom)) {\n\t\tif (intrinsicProps.postProcess || stencilSize) {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function.`,\n\t\t\t);\n\t\t} else {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'`,\n\t\t\t);\n\t\t\tintrinsicProps.postProcess = hybridStencilAutoZoom;\n\t\t}\n\t}\n\n\tif (!isUndefined(stencilSize)) {\n\t\tdeprecationWarning(\n\t\t\t`prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead.`,\n\t\t);\n\t\treturn (\n\t\t\t<FixedCropper\n\t\t\t\tref={ref as Ref<FixedCropperRef>}\n\t\t\t\tstencilSize={stencilSize}\n\t\t\t\t{...actualSettings}\n\t\t\t\t{...(intrinsicProps as AbstractCropperIntrinsicProps<ExtendedSettings<FixedCropperSettings>>)}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <AbstractCropper {...intrinsicProps} ref={ref} settings={actualSettings} />;\n});\n\nCropper.displayName = 'CropperComponent';\n","import React, { ComponentType, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = ComponentType<any>;\n\ntype LineComponent = ComponentType<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tgrid?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const CircleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twestSouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: 1,\n\t\t\tboundingBox: 'circle',\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && movable) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizable) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-circle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--movable': movable,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizable': resizable,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-circle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizable}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!movable}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-circle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nCircleStencil.displayName = 'CircleStencil';\n","import React, { forwardRef, HTMLAttributes, RefObject } from 'react';\nimport cn from 'classnames';\n\ninterface Props extends HTMLAttributes<HTMLImageElement> {\n\tsrc?: string | null;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n}\n\nexport const CropperSource = forwardRef<HTMLImageElement, Props>(\n\t({ src, crossOrigin = true, ...props }: Props, ref) => {\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref as RefObject<HTMLImageElement>}\n\t\t\t\tsrc={src}\n\t\t\t\tclassName={cn('advanced-cropper-source')}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperSource.displayName = 'CropperSource';\n","import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperFade } from '../service/CropperFade';\n\ninterface DesiredCropperRef {\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperPreviewWrapper: FC<CropperPreviewWrapperProps> = ({ children, cropper, className, style }) => {\n\treturn (\n\t\t<div className={cn(className, 'cropper-preview-wrapper')} style={style}>\n\t\t\t<CropperFade visible={cropper?.isLoaded()} className={'cropper-preview-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n","import React, { CSSProperties } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, Size, getPreviewStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperPreviewBackgroundProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tsize?: Size | null;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperPreviewBackground = ({\n\tclassName,\n\tcropper,\n\tcrossOrigin = true,\n\tsize,\n\tstyle,\n}: CropperPreviewBackgroundProps) => {\n\tconst state = cropper.getState();\n\tconst transitions = cropper.getTransitions();\n\tconst image = cropper.getImage();\n\n\tconst transformStyles = size && image && state?.coordinates ? getPreviewStyle(image, state, size, transitions) : {};\n\n\tconst src = image ? image.src : undefined;\n\n\treturn src ? (\n\t\t<img\n\t\t\tkey={src}\n\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\tsrc={src}\n\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\tstyle={{\n\t\t\t\t...transformStyles,\n\t\t\t\t...style,\n\t\t\t}}\n\t\t\tonMouseDown={preventDefault}\n\t\t/>\n\t) : null;\n};\n","import React, {\n\tRefObject,\n\tComponentType,\n\tCSSProperties,\n\tforwardRef,\n\tuseImperativeHandle,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseState,\n} from 'react';\nimport cn from 'classnames';\nimport {\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tSize,\n\tratio,\n\tisGreater,\n\tstretchPreviewBoundary,\n} from 'advanced-cropper';\nimport { StretchableBoundary, StretchableBoundaryMethods } from '../service/StretchableBoundary';\nimport { useWindowResize } from '../../hooks/useWindowResize';\nimport { ArbitraryProps, CropperBoundaryComponent } from '../../types';\nimport { useForceRerender } from '../../hooks/useForceRerender';\nimport { CropperPreviewWrapper } from './CropperPreviewWrapper';\nimport { CropperPreviewBackground } from './CropperPreviewBackground';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetImage: () => CropperImage | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewRef {\n\trefresh: () => void;\n}\n\ntype PreviewWrapperComponent = ComponentType<{\n\tcropper: any;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tloading?: boolean;\n\tloaded?: boolean;\n}>;\n\ntype PreviewBackgroundComponent = ComponentType<{\n\tcropper: any;\n\tsize: Size | null;\n\tclassName?: string;\n}>;\n\ninterface Props {\n\tstate?: CropperState | null;\n\timage?: CropperImage | null;\n\ttransitions?: CropperTransitions | null;\n\tloading?: boolean;\n\tloaded?: boolean;\n\tclassName?: string;\n\tcontentClassName?: string;\n\tbackgroundClassName?: string;\n\tbackgroundComponent?: PreviewBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\twrapperComponent?: PreviewWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstyle?: CSSProperties;\n\tcropper?: RefObject<DesiredCropperRef | null>;\n}\n\nexport const CropperPreview = forwardRef<CropperPreviewRef, Props>(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tcontentClassName,\n\t\t\tstate = null,\n\t\t\timage = null,\n\t\t\ttransitions = null,\n\t\t\tbackgroundComponent = CropperPreviewBackground,\n\t\t\tbackgroundProps,\n\t\t\tbackgroundClassName,\n\t\t\tboundaryComponent = StretchableBoundary,\n\t\t\tboundaryProps,\n\t\t\tboundaryClassName,\n\t\t\twrapperComponent = CropperPreviewWrapper,\n\t\t\twrapperProps,\n\t\t\tloaded = true,\n\t\t\tloading = false,\n\t\t\tstyle,\n\t\t\tcropper,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst rerender = useForceRerender();\n\n\t\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\n\t\tconst instance = cropper || {\n\t\t\tcurrent: {\n\t\t\t\tgetState: () => state,\n\t\t\t\tgetTransitions: () => transitions,\n\t\t\t\tgetImage: () => image,\n\t\t\t\tisLoaded: () => loaded,\n\t\t\t\tisLoading: () => loading,\n\t\t\t},\n\t\t};\n\n\t\tconst [size, setSize] = useState<Size | null>(null);\n\n\t\tconst coordinates = instance.current?.getState()?.coordinates;\n\n\t\tconst src = instance.current?.getImage()?.src;\n\n\t\tconst contentStyle = size\n\t\t\t? {\n\t\t\t\t\twidth: `${size.width}px`,\n\t\t\t\t\theight: `${size.height}px`,\n\t\t\t  }\n\t\t\t: {};\n\n\t\tconst refresh = () => {\n\t\t\tif (boundaryRef.current && coordinates) {\n\t\t\t\tboundaryRef.current.stretchTo(coordinates).then((size) => {\n\t\t\t\t\tif (size && coordinates) {\n\t\t\t\t\t\tif (isGreater(ratio(coordinates), ratio(size))) {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.width,\n\t\t\t\t\t\t\t\theight: size.width / ratio(coordinates),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.height * ratio(coordinates),\n\t\t\t\t\t\t\t\theight: size.height,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetSize(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\trerender();\n\t\t};\n\n\t\tuseWindowResize(refresh);\n\n\t\tuseLayoutEffect(refresh, [coordinates?.height, coordinates?.width]);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\trefresh: rerender,\n\t\t}));\n\n\t\tconst WrapperComponent = wrapperComponent;\n\n\t\tconst BackgroundComponent = backgroundComponent;\n\n\t\tconst BoundaryComponent = boundaryComponent;\n\n\t\treturn (\n\t\t\t<WrapperComponent\n\t\t\t\t{...wrapperProps}\n\t\t\t\tclassName={cn(className, 'advanced-cropper-preview')}\n\t\t\t\tcropper={instance.current}\n\t\t\t\tstyle={style}\n\t\t\t>\n\t\t\t\t<BoundaryComponent\n\t\t\t\t\tref={boundaryRef}\n\t\t\t\t\tstretchAlgorithm={stretchPreviewBoundary}\n\t\t\t\t\t{...boundaryProps}\n\t\t\t\t\tclassName={cn('advanced-cropper-preview__boundary', boundaryClassName)}\n\t\t\t\t>\n\t\t\t\t\t<div className={cn(contentClassName, 'advanced-cropper-preview__content')} style={contentStyle}>\n\t\t\t\t\t\t{instance.current && (\n\t\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\t\tcropper={instance.current}\n\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\tbackgroundClassName,\n\t\t\t\t\t\t\t\t\t'advanced-cropper-preview__image',\n\t\t\t\t\t\t\t\t\tsrc && 'advanced-cropper-preview__image--visible',\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</BoundaryComponent>\n\t\t\t</WrapperComponent>\n\t\t);\n\t},\n);\n","import { MutableRefObject, LegacyRef, RefCallback } from 'react';\n\nexport function mergeRefs<T = any>(refs: (MutableRefObject<T> | LegacyRef<T>)[]): RefCallback<T> {\n\treturn (value) => {\n\t\trefs.forEach((ref) => {\n\t\t\tif (typeof ref === 'function') {\n\t\t\t\tref(value);\n\t\t\t} else if (ref != null) {\n\t\t\t\t(ref as MutableRefObject<T | null>).current = value;\n\t\t\t}\n\t\t});\n\t};\n}\n"],"names":["classnames","DraggableArea","ratio"],"mappings":"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"}